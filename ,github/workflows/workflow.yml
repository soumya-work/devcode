name: Push Code to Another Repo

on:
  push:
    branches:
      - main # Trigger this on the 'dev' branch push

jobs:
  push_code:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Checkout Code from the current repository
      - name: Checkout Code
        uses: actions/checkout@v2

      # Step 2: Set up Git for pushing code
      - name: Set up Git
        run: |
          git config --global user.name "soumya-work"
          git config --global user.email "soumyaranjansahuwork@gmail.com"

      # Step 3: Add target repository as remote
      - name: Add target repository as remote
        run: git remote add target git@github.com:soumya-work/prodweb.git

      # Step 4: Push to Target Repository
      - name: Push to Target Repository
        run: |
          git push target main --force
        env:
          PAT: ${{ secrets.PAT }} # Use PAT for pushing to the target repo
